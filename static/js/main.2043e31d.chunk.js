(this["webpackJsonpreact-dev-demo"]=this["webpackJsonpreact-dev-demo"]||[]).push([[0],{10:function(e,t,a){"use strict";function n(e){for(var a in e)t.hasOwnProperty(a)||(t[a]=e[a])}Object.defineProperty(t,"__esModule",{value:!0}),n(a(45)),n(a(76))},112:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(21),r=a.n(i),l=(a(71),a(6)),c=a(15),s=(a(72),a(10)),u=a(121),d=a(120),m=a(56),f=a(25),h=a(127),v=a(53),g=a(119);h.a.registerLanguage("jsx",v.a);var E=function(e){var t=e.className,a=e.codeString;return o.a.createElement("div",{className:t},o.a.createElement(h.a,{language:"javascript",style:g.a,showLineNumbers:!0},a))},p=a(125),b=a(122),k=a(57),y={envId:"bn1ab7m56qolupi5sa0g",sdkConfig:{fetchNow:!0,enableConsoleLogs:!0,nodeEnv:"development"},visitorData:{id:"test-vid",context:{isAuth:!0,numberTransaction:12,isVip:!1}},sandbox:{envId:["bn1ab7m56qolupi5sa0g","bn1ab7m56qolupi5sa0g_1","bn1ab7m56qolupi5sa0g_2"],nodeEnv:["development","production"],visitorId:["test-vid","test-vid_2","test-vid_3"]}},C=function(){var e="initialization",t=Object(l.a)({},y.visitorData.context),a=Object(n.useContext)(_),i=a.currentSettings,r=a.setSettings,s=o.a.useState(Object(l.a)({},i)),u=Object(c.a)(s,2),h=u[0],v=u[1],g=function(e){var t=JSON.parse(e.currentTarget.parentElement.innerText),a=Object(l.a)({},h);if(e.currentTarget.checked)v(Object(l.a)({},h,{visitorData:Object(l.a)({},h.visitorData,{context:Object(l.a)({},h.visitorData.context,{},t)})}));else{var n=Object.keys(t)[0];v(Object(l.a)({},h,{visitorData:Object(l.a)({},h.visitorData,{context:Object.entries(a.visitorData.context).reduce((function(e,t){var a=Object(c.a)(t,2),o=a[0],i=a[1];return o===n?e:Object(l.a)({},e,Object(f.a)({},o,i))}),{})})}))}};return o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement("div",{className:"fsAnchor",id:e}),o.a.createElement(p.a,{variant:"dark",className:"fs-alert demoHook"},o.a.createElement(p.a.Heading,null,e),o.a.createElement("p",null,"The ",o.a.createElement("b",null,e)," is proceed with"," ",o.a.createElement("b",null,"FlagshipProvider"),". In this demo app, it is plugged like so:"),o.a.createElement(E,{className:"mv3",codeString:"import React from 'react';\nimport { FlagshipProvider } from \"@flagship.io/react-sdk\";\n\nconst App: React.FC = () => (\n  <>\n      <FlagshipProvider\n      envId={".concat(i.envId,"}\n      config={\n        ").concat(JSON.stringify(i.sdkConfig,null,2),"\n      }\n      visitorData={\n        ").concat(JSON.stringify(i.visitorData,null,2),'\n    }\n      onInitStart={() => {\n        console.log("init start");\n      }}\n      onInitDone={() => {\n        console.log("init done");\n      }}\n      loadingComponent={\n        <Container className="mt3">\n          <Row>\n            <Col xs={12}>Loading Flagship React SDK...</Col>\n          </Row>\n        </Container>\n      }\n    >\n      <Header />\n      <AppContainer />\n    </FlagshipProvider>\n  </>\n);          ')}),o.a.createElement("p",null,"To understand impact of each props, you can change some value dynamically here:"," "),o.a.createElement("h3",null,"1 - Playing with ",o.a.createElement("i",null,"config")),o.a.createElement(b.a,null,o.a.createElement(b.a.Group,{controlId:"initForm.Control1.1"},o.a.createElement(b.a.Label,null,"envId"),o.a.createElement(b.a.Control,{as:"select",onChange:function(e){return v(Object(l.a)({},h,{envId:e.target.value}))}},y.sandbox.envId.map((function(e){return o.a.createElement("option",{key:e},e)})))),o.a.createElement(b.a.Group,{controlId:"initForm.Control1.11"},o.a.createElement(b.a.Label,null,"nodeEnv"),o.a.createElement(b.a.Control,{as:"select",onChange:function(e){return v(Object(l.a)({},h,{sdkConfig:Object(l.a)({},h.sdkConfig,{nodeEnv:e.target.value})}))}},y.sandbox.nodeEnv.map((function(e){return o.a.createElement("option",{key:e},e)})))),o.a.createElement(b.a.Group,{controlId:"initForm.Control1.2"},o.a.createElement(b.a.Check,{type:"checkbox",checked:h.sdkConfig.fetchNow,onChange:function(e){return v(Object(l.a)({},h,{sdkConfig:Object(l.a)({},h.sdkConfig,{fetchNow:e.currentTarget.checked})}))},label:"fetchNow=".concat(h.sdkConfig.fetchNow)})),o.a.createElement(b.a.Group,{controlId:"initForm.Control1.3"},o.a.createElement(b.a.Check,{type:"checkbox",checked:h.sdkConfig.enableConsoleLogs,onChange:function(e){return v(Object(l.a)({},h,{sdkConfig:Object(l.a)({},h.sdkConfig,{enableConsoleLogs:e.currentTarget.checked})}))},label:"enableConsoleLogs=".concat(h.sdkConfig.enableConsoleLogs)}))),o.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},o.a.createElement(k.a,{variant:"secondary",onClick:function(){return r(Object(l.a)({},h))}},"Apply change")),o.a.createElement("h3",null,"2 - Playing with ",o.a.createElement("i",null,"visitorData")),o.a.createElement(b.a,null,o.a.createElement(b.a.Group,{controlId:"initForm.ControlSelect2"},o.a.createElement(b.a.Label,null,"visitorId"),o.a.createElement(b.a.Control,{as:"select",onChange:function(e){return v(Object(l.a)({},h,{visitorData:Object(l.a)({},h.visitorData,{id:e.target.value})}))}},y.sandbox.visitorId.map((function(e){return o.a.createElement("option",{key:e},e)})))),o.a.createElement(b.a.Group,{controlId:"initForm.ControlSelect3"},o.a.createElement(b.a.Label,null,"visitor context"),Object.entries(t).map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return o.a.createElement(b.a.Check,{key:a,type:"checkbox",id:"default-".concat(a),checked:h.visitorData.context.hasOwnProperty(a),onChange:g,label:JSON.stringify(Object(f.a)({},a,n))})})))),o.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},o.a.createElement(k.a,{variant:"secondary",onClick:function(){return r(Object(l.a)({},h))}},"Apply change")),o.a.createElement("div",null,"Since we have set those settings:"),o.a.createElement(E,{className:"mv3",codeString:"".concat(JSON.stringify(i.sdkConfig,null,2))}),o.a.createElement("div",null,"When you change those values, you can notice the behavior of the SDK, on logs & network."),o.a.createElement("div",null,"It will impact the output of Flagship SDK Hooks as well, take a look below."))))},S=function(){Object(s.useFsActivate)(["btnColor","otherKey1","otherKey2"]);return o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement("div",{className:"fsAnchor",id:"useFsActivate"}),o.a.createElement(p.a,{variant:"dark",className:"fs-alert demoHook"},o.a.createElement(p.a.Heading,null,"useFsActivate"),o.a.createElement("p",null,"Use ",o.a.createElement("b",null,"useFsActivate")," hook to trigger activation of a modification:"),o.a.createElement(E,{className:"mv3",codeString:"useFsActivate([\n    'btnColor',\n    'otherKey1',\n    'otherKey2'\n]);                        "}),o.a.createElement("div",null,"In this example, keys"," ",o.a.createElement("i",null,"btnColor, otherKey1, otherKey2"),' have been activated. You can check on networks, a http request "activate" for each key specified in the array.'))))},F=function(){var e=Object(s.useFsModifications)([{key:"btnColor",defaultValue:"green",activate:!1}]);return o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement("div",{className:"fsAnchor",id:"useFsModifications"}),o.a.createElement(p.a,{variant:"dark",className:"fs-alert demoHook"},o.a.createElement(p.a.Heading,null,"useFsModifications"),o.a.createElement("p",null,"Use ",o.a.createElement("b",null,"useFsModifications")," hook to get the modifications:"),o.a.createElement(E,{className:"mv3",codeString:"import { useFsModifications } from '@flagship.io/react-sdk';\nconst fsModifications = useFsModifications([\n  {\n      key: 'btnColor',\n      defaultValue: 'green',\n      activate: false\n  }\n]);              "}),o.a.createElement("p",null,"Output: "),o.a.createElement("div",null,o.a.createElement("button",{style:{backgroundColor:e.btnColor}},"I'm a button customized with Flagship")),o.a.createElement(E,{className:"mv3",codeString:"<div>\n    <button style={{ backgroundColor: ".concat(e.btnColor," }}>\n        I'm a button customized with Flagship\n    </button>\n</div>              ")}))))},O=function(){var e=o.a.useState(!1),t=Object(c.a)(e,2),a=t[0],n=t[1],i=o.a.useState(!1),r=Object(c.a)(i,2),l=r[0],u=r[1];Object(s.useFsSynchronize)([a],l);return o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement("div",{className:"fsAnchor",id:"useFsSynchronize"}),o.a.createElement(p.a,{variant:"dark",className:"fs-alert demoHook"},o.a.createElement(p.a.Heading,null,"useFsSynchronize"),o.a.createElement("p",null,"Use ",o.a.createElement("b",null,"useFsSynchronize")," hook to trigger activation of a modification:"),o.a.createElement(E,{className:"mv3",codeString:"useFsActivate([listenedValue], activateAllModifications);"}),o.a.createElement(b.a,null,o.a.createElement(b.a.Group,{controlId:"demoFsSynchronize.ControlSelect1"},o.a.createElement(b.a.Label,null,"listenedValue"),o.a.createElement(b.a.Check,{type:"checkbox",checked:a,onChange:function(e){return n(e.currentTarget.checked)},label:"listenedValue=".concat(a)})),o.a.createElement(b.a.Group,{controlId:"demoFsSynchronize.ControlSelect2"},o.a.createElement(b.a.Label,null,"listenedValue"),o.a.createElement(b.a.Check,{type:"checkbox",checked:l,onChange:function(e){return u(e.currentTarget.checked)},label:"activateAllModifications=".concat(l)}))),o.a.createElement("div",null,"Switch value of ",o.a.createElement("b",null,"listenedValue")," will trigger a synchronize as it is set in the first argument of"," ",o.a.createElement("b",null,"useFsActivate"),"."),o.a.createElement("div",null,"You can also notice that enabling"," ",o.a.createElement("b",null,"activateAllModifications")," to true will modify the payload sent to the Flagship API and thus trigger an activate."))))},j=function(){var e=Object(s.useFlagship)({modifications:{requested:[{key:"btnColor",defaultValue:"green",activate:!1}]}}),t=e.modifications,a=e.status;return o.a.createElement(d.a,null,o.a.createElement(m.a,null,o.a.createElement("div",{className:"fsAnchor",id:"useFlagship"}),o.a.createElement(p.a,{variant:"dark",className:"fs-alert demoHook"},o.a.createElement(p.a.Heading,null,"useFlagship"),o.a.createElement("p",null,"Use ",o.a.createElement("b",null,"useFlagship")," hook to get the modifications and the SDK status (more feature for this hook soon):"),o.a.createElement(E,{className:"mv3",codeString:"import { useFlagship } from '@flagship.io/react-sdk';\nconst { modifications: fsModifications, status: fsStatus } = useFlagship({\n    modifications: {\n        requested: [\n            {\n                key: 'btnColor',\n                defaultValue: 'green',\n                activate: false\n            }\n        ]\n    }\n});            "}),o.a.createElement("p",null,"fsModifications output: "),o.a.createElement("div",null,o.a.createElement("button",{style:{backgroundColor:t.btnColor}},"I'm a button customized with Flagship")),o.a.createElement(E,{className:"mv3",codeString:"<div>\n    <button style={{ backgroundColor: ".concat(t.btnColor," }}>\n        I'm a button customized with Flagship\n    </button>\n</div>              ")}),o.a.createElement("p",null,"fsStatus output: "),o.a.createElement(E,{className:"mv3",codeString:"\nfsStatus=".concat(JSON.stringify(a,null,2),";\n                        ")}))))},w=function(){return o.a.createElement(u.a,{className:"mt3"},o.a.createElement(C,null),o.a.createElement(j,null),o.a.createElement(F,null),o.a.createElement(S,null),o.a.createElement(O,null))},I=a(124),N=a(126),x=a(123),D=a(58),M=a.n(D),A=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(I.a,{className:"fsNavbar",fixed:"top"},o.a.createElement(I.a.Brand,{href:"https://github.com/abtasty/flagship-js-sdk",className:"flex item-center"},o.a.createElement("img",{alt:"Logo Flagship",src:M.a,className:"d-inline-block align-top logoAdjust"}),"REACT SDK (Dev demo)"),o.a.createElement(N.a,{className:"mr-auto fsNav"},o.a.createElement(N.a.Link,{href:"#initialization"},"Initialization"),o.a.createElement(x.a,{title:"Fs Hooks",id:"nav-dropdown"},o.a.createElement(x.a.Item,{eventKey:"4.0",href:"#useFlagship"},"useFlagship"),o.a.createElement(x.a.Item,{eventKey:"4.1",href:"#useFsModifications"},"useFsModifications"),o.a.createElement(x.a.Item,{eventKey:"4.2",href:"#useFsActivate"},"useFsActivate"),o.a.createElement(x.a.Item,{eventKey:"4.3",href:"#useFsSynchronize"},"useFsSynchronize"))),o.a.createElement(b.a,{inline:!0},o.a.createElement(N.a.Link,{href:"https://github.com/abtasty/flagship-react-sdk"},"Github"),o.a.createElement(N.a.Link,{href:"https://www.abtasty.com/solutions-product-teams/"},"What is Flagship ?"))))},_=Object(n.createContext)(null),L=function(){var e=o.a.useState({envId:y.envId,sdkConfig:Object(l.a)({},y.sdkConfig),visitorData:Object(l.a)({},y.visitorData)}),t=Object(c.a)(e,2),a=t[0],n=t[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.Provider,{value:{currentSettings:a,setSettings:n}},o.a.createElement(s.FlagshipProvider,{envId:a.envId,config:a.sdkConfig,visitorData:a.visitorData,onInitStart:function(){console.log("React SDK init start")},onInitDone:function(e){console.log(JSON.stringify(e)),console.log("React SDK init done")},onSavingModificationsInCache:function(){return console.log("React SDK saved modifications in cache")},loadingComponent:o.a.createElement(u.a,{className:"mt3"},o.a.createElement(d.a,null,o.a.createElement(m.a,{xs:12,style:{color:"white",height:"100vh",fontSize:"5vw"}},"Loading Flagship React SDK...")))},o.a.createElement(A,null),o.a.createElement(w,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(111);r.a.render(o.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},45:function(e,t,a){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<a;t++)for(var i=arguments[t],r=0,l=i.length;r<l;r++,o++)n[o]=i[r];return n},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=i(a(0)),c=r(a(73)),s={fsVisitor:null,fsModifications:null,status:{isLoading:!0,lastRefresh:null}},u=l.default.createContext({state:n({},s),setState:null});t.FlagshipProvider=function(e){var t=e.children,a=e.envId,i=e.config,r=e.visitorData,d=e.loadingComponent,m=e.modifications,f=e.onSavingModificationsInCache,h=e.onInitStart,v=e.onInitDone,g=r.id,E=r.context,p=l.useState(n({},s)),b=p[0],k=p[1],y=b.status.isLoading,C=b.fsVisitor;l.useEffect((function(){var e=c.default.initSdk(a,i).newVisitor(g,E);k(n(n({},b),{status:n(n({},b.status),{isLoading:!0}),fsVisitor:e})),h(),e.on("saveCache",(function(e){f(e)})),e.on("ready",(function(){m&&(e.fetchedModifications=n({},m)),k(n(n({},b),{status:{isLoading:!1,lastRefresh:(new Date).toISOString()},fsVisitor:e,fsModifications:e.fetchedModifications&&e.fetchedModifications.campaigns||null}))}))}),o([a,g],Object.values(i),Object.values(E))),l.useEffect((function(){y||v({fsVisitor:b.fsVisitor,fsModifications:b.fsModifications})}),[b]);return l.default.createElement(u.Provider,{value:{state:b,setState:k}},d&&!C?l.default.createElement(l.default.Fragment,null,d):l.default.createElement(l.default.Fragment,null,t))},t.FlagshipProvider.defaultProps={config:{},loadingComponent:void 0,modifications:void 0,onInitStart:function(){},onInitDone:function(){}},t.FlagshipConsumer=u.Consumer,t.default=u},58:function(e,t,a){e.exports=a.p+"static/media/Flagship-horizontal-product-white.6e8b90f3.png"},64:function(e,t,a){e.exports=a(112)},71:function(e,t,a){},72:function(e,t,a){},76:function(e,t,a){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),r=o(a(45)),l=function(){throw new Error("Error: flagship-react-sdk not correctly initialized... Make sure fsVisitor is ready.")};t.useFsActivate=function(e,t){void 0===t&&(t=[]);var a=i.useContext(r.default).state.fsVisitor;a?i.useEffect((function(){a.activateModifications(e.map((function(e){return{key:e}})))}),t):l()},t.useFsSynchronize=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=!1);var a=i.useContext(r.default),o=a.state,c=a.setState,s=o.fsVisitor;s?i.useEffect((function(){s.synchronizeModifications(t).then((function(){if(!c)throw new Error("Error: useFsSynchronize > useEffect, setState is undefined");c(n(n({},o),{fsVisitor:s,status:n(n({},o.status),{isLoading:!1,lastRefresh:(new Date).toISOString()})}))}))}),e):l()};var c=function(e,t,a){return void 0===a&&(a=!1),e?e.getModificationsCache(t,a):(l(),{})};t.useFsModifications=function(e,t){void 0===t&&(t=!1);var a=i.useContext(r.default).state.fsVisitor;return c(a,e,t)},t.useFlagship=function(e){var t=e.modifications,a=t.requested,n=t.activateAll,o=void 0!==n&&n,l=i.useContext(r.default).state,s=l.fsVisitor,u=l.status;return{modifications:c(s,a,o),status:u}}}},[[64,1,2]]]);
//# sourceMappingURL=main.2043e31d.chunk.js.map